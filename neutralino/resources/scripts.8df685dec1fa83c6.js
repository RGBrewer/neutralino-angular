var Neutralino=function(d){"use strict";function l(e,t,o,i){return new(o||(o=Promise))(function(s,c){function r(u){try{p(i.next(u))}catch(w){c(w)}}function a(u){try{p(i.throw(u))}catch(w){c(w)}}function p(u){var w;u.done?s(u.value):(w=u.value,w instanceof o?w:new o(function(M){M(w)})).then(r,a)}p((i=i.apply(e,t||[])).next())})}function g(e,t){let o=new CustomEvent(e,{detail:t});return window.dispatchEvent(o),Promise.resolve({success:!0,message:"Message dispatched"})}let f,v={},O=[],m={};function n(e,t){return new Promise((o,i)=>{if(f?.readyState!=WebSocket.OPEN)return void O.push({method:e,data:t,resolve:o,reject:i});const c="10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)),r=window.NL_TOKEN||sessionStorage.getItem("NL_TOKEN")||"";v[c]={resolve:o,reject:i},f.send(JSON.stringify({id:c,method:e,data:t,accessToken:r}))})}function R(e){return l(this,void 0,void 0,function*(){for(;e.length>0;){let t=e.shift();try{let o=yield n(t.method,t.data);t.resolve(o)}catch(o){t.reject(o)}}})}function b(e){let t=new Uint8Array(e),o="";for(let i of t)o+=String.fromCharCode(i);return window.btoa(o)}var y,N,e,S=Object.freeze({__proto__:null,createDirectory:function(e){return n("filesystem.createDirectory",{path:e})},removeDirectory:function(e){return n("filesystem.removeDirectory",{path:e})},writeFile:function(e,t){return n("filesystem.writeFile",{path:e,data:t})},appendFile:function(e,t){return n("filesystem.appendFile",{path:e,data:t})},writeBinaryFile:function(e,t){return n("filesystem.writeBinaryFile",{path:e,data:b(t)})},appendBinaryFile:function(e,t){return n("filesystem.appendBinaryFile",{path:e,data:b(t)})},readFile:function(e){return n("filesystem.readFile",{path:e})},readBinaryFile:function(e){return new Promise((t,o)=>{n("filesystem.readBinaryFile",{path:e}).then(i=>{let s=window.atob(i),c=s.length,r=new Uint8Array(c);for(let a=0;a<c;a++)r[a]=s.charCodeAt(a);t(r.buffer)}).catch(i=>{o(i)})})},removeFile:function(e){return n("filesystem.removeFile",{path:e})},readDirectory:function(e){return n("filesystem.readDirectory",{path:e})},copyFile:function(e,t){return n("filesystem.copyFile",{source:e,destination:t})},moveFile:function(e,t){return n("filesystem.moveFile",{source:e,destination:t})},getStats:function(e){return n("filesystem.getStats",{path:e})}});(e=y||(y={})).WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO",e.QUESTION="QUESTION",function(e){e.OK="OK",e.OK_CANCEL="OK_CANCEL",e.YES_NO="YES_NO",e.YES_NO_CANCEL="YES_NO_CANCEL",e.RETRY_CANCEL="RETRY_CANCEL",e.ABORT_RETRY_IGNORE="ABORT_RETRY_IGNORE"}(N||(N={}));var E,D=Object.freeze({__proto__:null,get Icon(){return y},get MessageBoxChoice(){return N},execCommand:function(e,t){return n("os.execCommand",Object.assign({command:e},t))},spawnProcess:function(e){return n("os.spawnProcess",{command:e})},updateSpawnedProcess:function(e,t,o){return n("os.updateSpawnedProcess",{id:e,event:t,data:o})},getSpawnedProcesses:function(){return n("os.getSpawnedProcesses")},getEnv:function(e){return n("os.getEnv",{key:e})},showOpenDialog:function(e,t){return n("os.showOpenDialog",Object.assign({title:e},t))},showFolderDialog:function(e,t){return n("os.showFolderDialog",Object.assign({title:e},t))},showSaveDialog:function(e,t){return n("os.showSaveDialog",Object.assign({title:e},t))},showNotification:function(e,t,o){return n("os.showNotification",{title:e,content:t,icon:o})},showMessageBox:function(e,t,o,i){return n("os.showMessageBox",{title:e,content:t,choice:o,icon:i})},setTray:function(e){return n("os.setTray",e)},open:function(e){return n("os.open",{url:e})},getPath:function(e){return n("os.getPath",{name:e})}}),L=Object.freeze({__proto__:null,getMemoryInfo:function(){return n("computer.getMemoryInfo")},getArch:function(){return n("computer.getArch")},getKernelInfo:function(){return n("computer.getKernelInfo")},getOSInfo:function(){return n("computer.getOSInfo")},getCPUInfo:function(){return n("computer.getCPUInfo")},getDisplays:function(){return n("computer.getDisplays")}}),I=Object.freeze({__proto__:null,setData:function(e,t){return n("storage.setData",{key:e,data:t})},getData:function(e){return n("storage.getData",{key:e})}});!function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO"}(E||(E={}));var x=Object.freeze({__proto__:null,get LoggerType(){return E},log:function(e,t){return n("debug.log",{message:e,type:t})}}),F=Object.freeze({__proto__:null,exit:function(e){return n("app.exit",{code:e})},killProcess:function(){return n("app.killProcess")},restartProcess:function(e){return new Promise(t=>l(this,void 0,void 0,function*(){let o=window.NL_ARGS.reduce((i,s)=>i+" "+s,"");e?.args&&(o+=" "+e.args),yield Neutralino.os.execCommand(o,{background:!0}),Neutralino.app.exit(),t()}))},getConfig:function(){return n("app.getConfig")},broadcast:function(e,t){return n("app.broadcast",{event:e,data:t})}});const _=new WeakMap;var C=Object.freeze({__proto__:null,setTitle:function(e){return n("window.setTitle",{title:e})},getTitle:function(){return n("window.getTitle")},maximize:function(){return n("window.maximize")},unmaximize:function(){return n("window.unmaximize")},isMaximized:function(){return n("window.isMaximized")},minimize:function(){return n("window.minimize")},setFullScreen:function(){return n("window.setFullScreen")},exitFullScreen:function(){return n("window.exitFullScreen")},isFullScreen:function(){return n("window.isFullScreen")},show:function(){return n("window.show")},hide:function(){return n("window.hide")},isVisible:function(){return n("window.isVisible")},focus:function(){return n("window.focus")},setIcon:function(e){return n("window.setIcon",{icon:e})},move:function(e,t){return n("window.move",{x:e,y:t})},setDraggableRegion:function(e){return new Promise((t,o)=>{const i=e instanceof Element?e:document.getElementById(e);let s=0,c=0;if(!i)return o({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(_.has(i))return o({code:"NE_WD_ALRDREL",message:"This DOM element is already an active draggable region"});function r(u){return l(this,void 0,void 0,function*(){yield Neutralino.window.move(u.screenX-s,u.screenY-c)})}function a(u){0===u.button&&(s=u.clientX,c=u.clientY,i.addEventListener("pointermove",r),i.setPointerCapture(u.pointerId))}function p(u){i.removeEventListener("pointermove",r),i.releasePointerCapture(u.pointerId)}i.addEventListener("pointerdown",a),i.addEventListener("pointerup",p),_.set(i,{pointerdown:a,pointerup:p}),t({success:!0,message:"Draggable region was activated"})})},unsetDraggableRegion:function(e){return new Promise((t,o)=>{const i=e instanceof Element?e:document.getElementById(e);if(!i)return o({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(!_.has(i))return o({code:"NE_WD_NOTDRRE",message:"DOM element is not an active draggable region"});const{pointerdown:s,pointerup:c}=_.get(i);i.removeEventListener("pointerdown",s),i.removeEventListener("pointerup",c),_.delete(i),t({success:!0,message:"Draggable region was deactivated"})})},setSize:function(e){return new Promise((t,o)=>l(this,void 0,void 0,function*(){let i=yield Neutralino.window.getSize();n("window.setSize",e=Object.assign(Object.assign({},i),e)).then(s=>{t(s)}).catch(s=>{o(s)})}))},getSize:function(){return n("window.getSize")},getPosition:function(){return n("window.getPosition")},setAlwaysOnTop:function(e){return n("window.setAlwaysOnTop",{onTop:e})},create:function(e,t){return new Promise((o,i)=>{function s(r){return"string"!=typeof r||(r=r.trim()).includes(" ")&&(r=`"${r}"`),r}let c=window.NL_ARGS.reduce((r,a,p)=>((a.includes("--path=")||a.includes("--debug-mode")||a.includes("--load-dir-res")||0==p)&&(r+=" "+s(a)),r),"");c+=" --url="+s(e);for(let r in t)"processArgs"!=r&&(c+=` --window${r.replace(/[A-Z]|^[a-z]/g,a=>"-"+a.toLowerCase())}=${s(t[r])}`);t&&t.processArgs&&(c+=" "+t.processArgs),Neutralino.os.execCommand(c,{background:!0}).then(r=>{o(r)}).catch(r=>{i(r)})})}}),A=Object.freeze({__proto__:null,broadcast:function(e,t){return n("events.broadcast",{event:e,data:t})},on:function(e,t){return window.addEventListener(e,t),Promise.resolve({success:!0,message:"Event listener added"})},off:function(e,t){return window.removeEventListener(e,t),Promise.resolve({success:!0,message:"Event listener removed"})},dispatch:g}),z=Object.freeze({__proto__:null,dispatch:function(e,t,o){return new Promise((i,s)=>l(this,void 0,void 0,function*(){let c=yield Neutralino.extensions.getStats();if(c.loaded.includes(e))if(c.connected.includes(e))try{let r=yield n("extensions.dispatch",{extensionId:e,event:t,data:o});i(r)}catch(r){s(r)}else a={method:"extensions.dispatch",data:{extensionId:e,event:t,data:o},resolve:i,reject:s},(r=e)in m?m[r].push(a):m[r]=[a];else s({code:"NE_EX_EXTNOTL",message:`${e} is not loaded`});var r,a}))},broadcast:function(e,t){return n("extensions.broadcast",{event:e,data:t})},getStats:function(){return n("extensions.getStats")}});let h=null;var j=Object.freeze({__proto__:null,checkForUpdates:function(e){return new Promise((t,o)=>l(this,void 0,void 0,function*(){if(!e)return o({code:"NE_RT_NATRTER",message:"Missing require parameter: url"});try{let i=yield fetch(e);h=JSON.parse(yield i.text()),(s=h).applicationId&&s.applicationId==window.NL_APPID&&s.version&&s.resourcesURL?t(h):o({code:"NE_UP_CUPDMER",message:"Invalid update manifest or mismatching applicationId"})}catch{o({code:"NE_UP_CUPDERR",message:"Unable to fetch update manifest"})}var s}))},install:function(){return new Promise((e,t)=>l(this,void 0,void 0,function*(){if(!h)return t({code:"NE_UP_UPDNOUF",message:"No update manifest loaded"});try{let o=yield fetch(h.resourcesURL),i=yield o.arrayBuffer();yield Neutralino.filesystem.writeBinaryFile(window.NL_PATH+"/resources.neu",i),e({success:!0,message:"Update installed. Restart the process to see updates"})}catch{t({code:"NE_UP_UPDINER",message:"Update installation error"})}}))}}),U=Object.freeze({__proto__:null,readText:function(e,t){return n("clipboard.readText",{key:e,data:t})},writeText:function(e){return n("clipboard.writeText",{data:e})}});let T=!1;return d.app=F,d.clipboard=U,d.computer=L,d.debug=x,d.events=A,d.extensions=z,d.filesystem=S,d.init=function(){T||(function P(){window.NL_TOKEN&&sessionStorage.setItem("NL_TOKEN",window.NL_TOKEN),f=new WebSocket(`ws://${window.location.hostname}:${window.NL_PORT}`),function(){Neutralino.events.on("ready",()=>l(this,void 0,void 0,function*(){if(yield R(O),!window.NL_EXTENABLED)return;let e=yield Neutralino.extensions.getStats();for(let t of e.connected)g("extensionReady",t)})),Neutralino.events.on("extClientConnect",e=>{g("extensionReady",e.detail)}),window.NL_EXTENABLED&&Neutralino.events.on("extensionReady",e=>l(this,void 0,void 0,function*(){e.detail in m&&(yield R(m[e.detail]),delete m[e.detail])}))}(),function(){f.addEventListener("message",e=>{var t,o;const i=JSON.parse(e.data);i.id&&i.id in v?(null!==(t=i.data)&&void 0!==t&&t.error?(v[i.id].reject(i.data.error),"NE_RT_INVTOKN"==i.data.error.code&&(f.close(),document.body.innerText="",document.write("<code>NE_RT_INVTOKN</code>: Neutralinojs application configuration prevents accepting native calls from this client."))):!(null===(o=i.data)||void 0===o)&&o.success&&v[i.id].resolve(i.data.hasOwnProperty("returnValue")?i.data.returnValue:i.data),delete v[i.id]):i.event&&g(i.event,i.data)}),f.addEventListener("open",e=>l(this,void 0,void 0,function*(){g("ready")})),f.addEventListener("close",e=>l(this,void 0,void 0,function*(){g("serverOffline",{code:"NE_CL_NSEROFF",message:"Neutralino server is offline. Try restarting the application"})}))}()}(),window.NL_ARGS.find(e=>"--neu-dev-auto-reload"==e)&&Neutralino.events.on("neuDev_reloadApp",()=>l(this,void 0,void 0,function*(){yield Neutralino.debug.log("Reloading the application..."),location.reload()})),window.NL_CVERSION="3.6.0",window.NL_CCOMMIT="0a28a7f28614f676f06e9a1a723fed6602fd9861",T=!0)},d.os=D,d.storage=I,d.updater=j,d.window=C,Object.defineProperty(d,"__esModule",{value:!0}),d}({});